from aiogram.dispatcher.filters import BoundFilter
from datetime import datetime
from aiogram import types

import os
import sys
import inspect

currentdir = os.path.dirname(os.path.abspath(inspect.getfile(inspect.currentframe())))
parentdir = os.path.dirname(currentdir)
sys.path.insert(0, parentdir)

from config.load_all import bot
from variables import end_timestamp
from menu.inline.during_sub_board import *
from functions.make_links import Channel_link

func = Channel_link()


class TimeFilter(BoundFilter):
    async def check(self, message: types.Message):
        if datetime.now() >= end_timestamp:
            await bot.send_message(message.from_user.id, "<b>–†–æ–∑—ã–≥—Ä—ã—à —É–∂–µ –∑–∞–≤–µ—Ä—à–µ–Ω.</b>\n\n–ù–æ –º—ã —É–∂–µ –≥–æ—Ç–æ–≤—ã–º –∫ –∑–∞–ø—É—Å–∫—É –Ω–æ–≤—ã–π —Ä–æ–∑—ã–≥—Ä—ã—à —Å –±–µ–∑—É–º–Ω–æ –∫—Ä—É—Ç—ã–º–∏ –ø—Ä–∏–∑–∞–º–∏!\n\n–ù—É–∂–Ω–æ —á—É—Ç—å-—á—É—Ç—å –ø–æ–¥–æ–∂–¥–∞—Ç—å üéÅ\n\n–°–æ–≤—Å–µ–º —á—É—Ç—å-—á—É—Ç—å‚ò∫Ô∏è",
        reply_markup=types.ReplyKeyboardRemove())
            return False
        else:
            return True